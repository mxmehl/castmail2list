{% extends "base.html" %}

{% block title %}{{ _('Edit List') }} - {{ mailing_list.name }}{% endblock %}

{% block content %}
<h2>{{ _('Edit List: %(name)s', name=mailing_list.name) }}</h2>

{%- include "flash.html" %} {# Show flash messages #}

<form method="POST">
    {{ form.csrf_token }}

    {{ form.name.label }}
    {{ form.name }}

    {{ form.address.label }}
    {{ form.address }}

    {{ form.from_addr.label }}
    {{ form.from_addr }}
    <small>{{ (form.from_addr.description) }}</small>

    <details name="mode" open="open">
        <summary>{{ _('Mode Settings') }}</summary>

        <fieldset id="select-mode">
            {{ form.mode.label }}
            {{ form.mode }}
        </fieldset>

        <fieldset class="mode-group">
            {{ form.only_subscribers_send(role="switch") }}
            {{ form.only_subscribers_send.label }}
        </fieldset>

        <fieldset class="mode-broadcast">
            {{ form.allowed_senders.label }}
            {{ form.allowed_senders(placeholder=("user@example.com,another@example.com")) }}
            <small>{{ (form.allowed_senders.description) }}</small>
        </fieldset>
    </details>

    <hr />

    <details>
        <summary>{{ _('IMAP Settings') }}</summary>
        {{ form.imap_host.label }}
        {{ form.imap_host(placeholder=config.IMAP_DEFAULT_HOST) }}
        {{ form.imap_port.label }}
        {{ form.imap_port(placeholder=config.IMAP_DEFAULT_PORT) }}
        {{ form.imap_user.label }}
        {{ form.imap_user }}
        {{ form.imap_pass.label }}
        {{ form.imap_pass(placeholder=_("Leave empty to not update password")) }}
    </details>

    {{ form.submit(value=_('Save List')) }}
</form>
{% endblock %}
